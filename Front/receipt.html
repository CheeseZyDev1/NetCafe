<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Receipt</title>
  <style>
    body { font-family: Arial, sans-serif; background: #f5f5f5; padding: 20px; }
    .container { max-width: 600px; margin: 20px auto; background: #fff; border-radius: 8px; padding: 20px; 
                 box-shadow: 0 0 10px rgba(0,0,0,0.1); position: relative; }
    h2 { text-align: center; }
    table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    th, td { padding: 8px; border: 1px solid #ccc; text-align: left; }
    .total { text-align: right; font-weight: bold; margin-top: 10px; }
    /* Fixed navigation buttons */
    .top-left-button {
      position: fixed; top: 20px; left: 20px; background: #007bff; color: #fff; padding: 10px 16px; 
      border-radius: 4px; text-decoration: none;
    }
    .bottom-right-button {
      position: fixed; bottom: 20px; right: 20px; background: #555; color: #fff; padding: 10px 16px; 
      border-radius: 4px; border: none; cursor: pointer;
    }
  </style>
</head>
<body>
  <a href="home.html" class="top-left-button">üè† Home</a>
  <button class="bottom-right-button" onclick="goBack()">Back</button>
  
  <div class="container">
    <h2>Receipt</h2>
    <p>Date: <span id="receipt-date"></span></p>
    <p>User: <span id="receipt-user"></span></p>
    <table id="receipt-table">
      <thead>
        <tr>
          <th>Type</th>
          <th>Detail</th>
          <th>Quantity/Hours</th>
          <th>Price</th>
        </tr>
      </thead>
      <tbody></tbody>
    </table>
    <div class="total">Total: <span id="receipt-total"></span></div>
  </div>
  
  <script>
    function goBack() { window.history.back(); }
    const receipt = JSON.parse(localStorage.getItem('currentReceipt'));
    if (!receipt) { alert("No receipt found."); window.location.href = "home.html"; }
    document.getElementById('receipt-date').textContent = receipt.date;
    document.getElementById('receipt-user').textContent = receipt.user.username;
    const tbody = document.getElementById('receipt-table').querySelector('tbody');
    receipt.items.forEach(item => {
      const tr = document.createElement('tr');
      let detail = "";
      if (item.type === 'reservation') {
        detail = `Computer ${item.data.ComputerId} (Discount: ${item.data.discount}%)`;
      } else if (item.type === 'order') {
        detail = item.data.productName;
      }
      tr.innerHTML = `<td>${item.type}</td>
                      <td>${detail}</td>
                      <td>${item.data.quantity || item.data.hours}</td>
                      <td>${item.data.total_price}</td>`;
      tbody.appendChild(tr);
    });
    document.getElementById('receipt-total').textContent = receipt.total;
  </script>
</body>
</html>
